<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ã‚«ãƒŠãƒªã‚¢é€šä¿¡ï½œæ´»å‹•ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</title>

<style>
  :root{
    --bg:#f5f6f8;
    --card:#fff;
    --shadow:0 10px 22px rgba(0,0,0,.08);
    --header:#4fc3c7;
    --accent:#2fb34a;
    --accent2:#1aa65a;
    --line:#e9edf2;
    --text:#222;
    --muted:#6b7280;
    --sel:#4fc3c7;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:-apple-system,BlinkMacSystemFont,"Noto Sans JP","Hiragino Kaku Gothic ProN","Yu Gothic",sans-serif;
    background:var(--bg);
    color:var(--text);
  }

  header{
    background:var(--header);
    color:#fff;
    text-align:center;
    padding:16px 14px;
    font-size:20px;
    font-weight:800;
  }

  .wrap{
    max-width: 980px;
    margin: 0 auto;
  }

  /* ä¸Šéƒ¨ï¼šã‚¿ã‚¤ãƒˆãƒ«/æ“ä½œ */
  .top{
    padding:14px 16px 8px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
  }
  .brand{
    display:flex; gap:10px; align-items:flex-start;
  }
  .brand .bird{font-size:26px; line-height:1}
  .brand .t1{font-weight:900; font-size:16px}
  .brand .t2{color:var(--muted); font-size:12px; margin-top:2px}
  .controls{
    display:flex; gap:10px; align-items:center;
  }
  select{
    border:1px solid var(--line);
    border-radius:12px;
    padding:8px 10px;
    background:#fff;
    font-weight:700;
  }
  .btn{
    border:none;
    border-radius:999px;
    padding:10px 14px;
    font-weight:900;
    cursor:pointer;
  }
  .btn.save{
    background:linear-gradient(135deg,var(--accent),var(--accent2));
    color:#fff;
    box-shadow:0 10px 18px rgba(47,179,74,.22);
  }
  .btn.ghost{
    background:#fff;
    border:1px solid var(--line);
    color:#111;
  }

  /* ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
  .section{
    background:var(--card);
    margin: 10px 16px;
    border-radius:18px;
    box-shadow: var(--shadow);
    padding:14px;
  }
  .section h3{
    margin:0 0 10px;
    font-size:16px;
    font-weight:900;
  }
  .help{
    color:var(--muted);
    font-size:12px;
    line-height:1.5;
    margin-bottom:10px;
  }

  /* ===== ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆå°ã•ã‚ã«å¤‰æ›´ï¼‰ ===== */
  .action-grid{
    display:grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 14px;           /* â†å°‘ã—è©°ã‚ã‚‹ */
  }
  .action-item{
    background:#fff;
    border:1px solid var(--line);
    border-radius:18px;
    padding:14px 8px 12px; /* â†å°‘ã—å°ã•ã */
    text-align:center;
    box-shadow:0 6px 14px rgba(0,0,0,0.06);
    cursor:pointer;
    user-select:none;
  }
  .action-item:active{ transform: translateY(1px); }
  .action-item.active{
    outline:3px solid rgba(79,195,199,.35);
    border-color: rgba(79,195,199,.6);
  }
  .action-icon{
    width: 62px;   /* â†ã“ã“ã‚’å°ã•ã */
    height: 62px;  /* â†ã“ã“ã‚’å°ã•ã */
    border-radius:50%;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:30px; /* â†å°‘ã—å°ã•ã */
    margin: 0 auto 8px;
  }
  .action-label{
    font-size:13px; /* â†å°‘ã—å°ã•ã */
    font-weight:900;
  }

  /* è‰² */
  .bg-orange{ background:#ff8a65; }
  .bg-purple{ background:#9575cd; }
  .bg-teal  { background:#4db6ac; }
  .bg-yellow{ background:#fbc02d; }
  .bg-green { background:#81c784; }
  .bg-brown { background:#ffb74d; }
  .bg-blue  { background:#64b5f6; }
  .bg-lime  { background:#aed581; }
  .bg-gray  { background:#90a4ae; }

  /* ç¾åœ¨é¸æŠè¡¨ç¤º */
  .status{
    margin-top:10px;
    padding-top:10px;
    border-top:1px dashed var(--line);
    font-size:13px;
    color:#111;
  }
  .status .muted{color:var(--muted)}
  .pill{
    display:inline-flex;
    gap:6px;
    align-items:center;
    border:1px solid var(--line);
    border-radius:999px;
    padding:6px 10px;
    background:#fff;
    font-weight:900;
    margin-left:6px;
  }

  /* ===== ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ ===== */
  .cal-head{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    margin-bottom:10px;
  }
  .cal-title{
    font-weight:900;
    font-size:16px;
  }
  .nav{
    display:flex; gap:8px;
  }
  .nav .btn{
    padding:8px 12px;
    font-weight:900;
    border-radius:12px;
  }

  .week{
    display:grid;
    grid-template-columns: repeat(7, 1fr);
    gap:6px;
    margin-bottom:6px;
    font-size:12px;
    font-weight:900;
    color:var(--muted);
    text-align:center;
  }
  .days{
    display:grid;
    grid-template-columns: repeat(7, 1fr);
    gap:6px;
  }
  .day{
    background:#f9fafb;
    border:1px solid var(--line);
    border-radius:14px;
    min-height:74px;
    padding:7px;
    position:relative;
    cursor:pointer;
    overflow:hidden;
  }
  .day.empty{
    background:transparent;
    border:none;
    cursor:default;
  }
  .dnum{
    font-weight:900;
    font-size:13px;
  }
  .tag{
    margin-top:6px;
    display:flex;
    align-items:center;
    gap:6px;
    border-radius:999px;
    padding:6px 8px;
    font-size:12px;
    font-weight:900;
    width: fit-content;
    max-width: 100%;
    background:#fff;
    border:1px solid var(--line);
  }
  .tag .emo{font-size:14px}
  .tag .txt{
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
    max-width: 78px;
  }

  /* ã‚¿ã‚°è‰²ï¼ˆæ´»å‹•ã”ã¨ï¼‰ */
  .t-orange{ background:rgba(255,138,101,.22); border-color:rgba(255,138,101,.35); }
  .t-purple{ background:rgba(149,117,205,.22); border-color:rgba(149,117,205,.35); }
  .t-teal  { background:rgba(77,182,172,.22);  border-color:rgba(77,182,172,.35); }
  .t-yellow{ background:rgba(251,192,45,.22);  border-color:rgba(251,192,45,.35); }
  .t-green { background:rgba(129,199,132,.22); border-color:rgba(129,199,132,.35); }
  .t-brown { background:rgba(255,183,77,.22);  border-color:rgba(255,183,77,.35); }
  .t-blue  { background:rgba(100,181,246,.22); border-color:rgba(100,181,246,.35); }
  .t-lime  { background:rgba(174,213,129,.22); border-color:rgba(174,213,129,.35); }
  .t-gray  { background:rgba(144,164,174,.22); border-color:rgba(144,164,174,.35); }

  .hint{
    margin-top:10px;
    color:var(--muted);
    font-size:12px;
  }
</style>
</head>

<body>
<header>ã‚«ãƒŠãƒªã‚¢é€šä¿¡ï½œæ´»å‹•ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</header>

<div class="wrap">
  <div class="top">
    <div class="brand">
      <div class="bird">ğŸ¤</div>
      <div>
        <div class="t1">ã‚«ãƒŠãƒªã‚¢é€šä¿¡ï½œæ´»å‹•ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</div>
        <div class="t2">æ´»å‹•ã‚’é¸ã‚“ã§ã€æ—¥ä»˜ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã ã‘ã€‚å…±æœ‰ç”¨ãƒšãƒ¼ã‚¸ã‚„PDFã‚‚ä½œã‚Œã¾ã™ã€‚</div>
      </div>
    </div>

    <div class="controls">
      <select id="monthSelect"></select>
      <button class="btn ghost" id="clearBtn">å…¨æ¶ˆå»</button>
      <button class="btn save" id="saveBtn">ã“ã®æœˆã‚’ä¿å­˜</button>
    </div>
  </div>

  <!-- â‘  æ´»å‹•ã‚’é¸ã¶ -->
  <div class="section">
    <h3>â‘  æ´»å‹•ã‚’é¸ã¶</h3>
    <div class="help">
      ã¾ãšæ´»å‹•ã‚’1ã¤é¸ã‚“ã§ãã ã•ã„ã€‚æ¬¡ã«ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®æ—¥ä»˜ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨ã€ãã®æ´»å‹•ãŒå…¥ã‚Šã¾ã™ã€‚<br>
      ï¼ˆä¾‹ï¼šé‹å‹•ã‚’é¸ã¶ â†’ 12/7 ã‚’ã‚¿ãƒƒãƒ— â†’ 12/7 ãŒã€Œé‹å‹•ã€ã«ãªã‚‹ï¼‰
    </div>

    <div class="action-grid" id="actionGrid"></div>

    <div class="status" id="status">
      <span class="muted">é¸æŠä¸­ã®æ´»å‹•ï¼š</span>
      <span class="pill" id="currentPill">ãªã—</span><br>
      <span class="muted">ç›´è¿‘ã§é¸ã‚“ã æ—¥ä»˜ï¼š</span>
      <span id="lastDate">ãªã—</span>
    </div>
  </div>

  <!-- â‘¡ æ—¥ä»˜ã‚’é¸ã¶ -->
  <div class="section">
    <div class="cal-head">
      <div class="cal-title" id="calTitle">2025å¹´12æœˆ</div>
      <div class="nav">
        <button class="btn ghost" id="prevBtn">â—€ å‰æœˆ</button>
        <button class="btn ghost" id="nextBtn">æ¬¡æœˆ â–¶</button>
      </div>
    </div>

    <div class="week">
      <div style="color:#ef4444">æ—¥</div><div>æœˆ</div><div>ç«</div><div>æ°´</div><div>æœ¨</div><div>é‡‘</div><div style="color:#3b82f6">åœŸ</div>
    </div>
    <div class="days" id="days"></div>

    <div class="hint">â€» æ´»å‹•ã‚’é¸æŠã—ã¦ã‹ã‚‰æ—¥ä»˜ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨åæ˜ ã•ã‚Œã¾ã™ã€‚ã‚‚ã†ä¸€åº¦ã‚¿ãƒƒãƒ—ã§ä¸Šæ›¸ãã§ãã¾ã™ã€‚</div>
  </div>
</div>

<script>
/* ===== æ´»å‹•ãƒã‚¹ã‚¿ï¼ˆãƒˆãƒƒãƒ—ã¨åŒã˜è¦‹ãŸç›®ï¼‰ ===== */
const ACTIVITIES = [
  { id:"sport", label:"é‹å‹•", emoji:"ğŸƒ", iconBg:"bg-orange", tag:"t-orange" },
  { id:"finger", label:"æŒ‡å…ˆèª²é¡Œ", emoji:"âœ‹", iconBg:"bg-purple", tag:"t-purple" },
  { id:"focus", label:"é›†ä¸­èª²é¡Œ", emoji:"ğŸ§ ", iconBg:"bg-teal", tag:"t-teal" },
  { id:"craft", label:"å·¥ä½œ", emoji:"ğŸ¨", iconBg:"bg-yellow", tag:"t-yellow" },
  { id:"cook", label:"æ–™ç†", emoji:"ğŸ³", iconBg:"bg-green", tag:"t-green" },
  { id:"snack", label:"ãŠã‚„ã¤ä½œã‚Š", emoji:"ğŸª", iconBg:"bg-brown", tag:"t-brown" },
  { id:"rule", label:"ãƒ«ãƒ¼ãƒ«ã‚²ãƒ¼ãƒ ", emoji:"ğŸ²", iconBg:"bg-blue", tag:"t-blue" },
  { id:"life", label:"ç”Ÿæ´»å­¦ç¿’", emoji:"ğŸ ", iconBg:"bg-lime", tag:"t-lime" },
  { id:"out", label:"å¤–å‡º", emoji:"ğŸšŒ", iconBg:"bg-gray", tag:"t-gray" },
];

const activityById = Object.fromEntries(ACTIVITIES.map(a => [a.id, a]));

/* ===== çŠ¶æ…‹ ===== */
let current = null;                 // é¸æŠä¸­ã®activity id
let viewY = 2025;
let viewM = 12;                     // 1-12
let lastPicked = "ãªã—";

/* ===== ä¿å­˜ã‚­ãƒ¼ ===== */
function keyOf(y,m){ return `kanakia_${y}-${String(m).padStart(2,"0")}`; }

/* ===== æœˆã‚»ãƒ¬ã‚¯ãƒˆä½œæˆ ===== */
function buildMonthSelect(){
  const sel = document.getElementById("monthSelect");
  sel.innerHTML = "";
  // å‰å¾Œ12ãƒ¶æœˆãã‚‰ã„å‡ºã™
  const base = new Date();
  const start = new Date(base.getFullYear(), base.getMonth()-12, 1);
  for(let i=0;i<36;i++){
    const d = new Date(start.getFullYear(), start.getMonth()+i, 1);
    const y = d.getFullYear();
    const m = d.getMonth()+1;
    const opt = document.createElement("option");
    opt.value = `${y}-${m}`;
    opt.textContent = `${y}å¹´${m}æœˆ`;
    sel.appendChild(opt);
  }
  sel.value = `${viewY}-${viewM}`;
  sel.addEventListener("change", ()=>{
    const [y,m] = sel.value.split("-").map(Number);
    viewY = y; viewM = m;
    renderCalendar();
  });
}

/* ===== æ´»å‹•ã‚°ãƒªãƒƒãƒ‰ ===== */
function renderActivities(){
  const grid = document.getElementById("actionGrid");
  grid.innerHTML = "";
  ACTIVITIES.forEach(a=>{
    const item = document.createElement("div");
    item.className = "action-item";
    item.dataset.id = a.id;

    item.innerHTML = `
      <div class="action-icon ${a.iconBg}">${a.emoji}</div>
      <div class="action-label">${a.label}</div>
    `;

    item.addEventListener("click", ()=>{
      current = a.id;
      document.querySelectorAll(".action-item").forEach(x=>x.classList.remove("active"));
      item.classList.add("active");
      updateStatus();
    });

    grid.appendChild(item);
  });
}

/* ===== ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æç”» ===== */
function renderCalendar(){
  const title = document.getElementById("calTitle");
  title.textContent = `${viewY}å¹´${viewM}æœˆ`;
  document.getElementById("monthSelect").value = `${viewY}-${viewM}`;

  const daysEl = document.getElementById("days");
  daysEl.innerHTML = "";

  const first = new Date(viewY, viewM-1, 1);
  const last = new Date(viewY, viewM, 0);
  const startDow = first.getDay(); // 0(æ—¥)-6(åœŸ)
  const total = last.getDate();

  // ä¿å­˜ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã‚€
  const map = loadMonth(viewY, viewM); // { "2025-12-01": "sport", ... }

  // ç©ºç™½ã‚»ãƒ«
  for(let i=0;i<startDow;i++){
    const empty = document.createElement("div");
    empty.className = "day empty";
    daysEl.appendChild(empty);
  }

  // æ—¥ä»˜ã‚»ãƒ«
  for(let d=1; d<=total; d++){
    const cell = document.createElement("div");
    cell.className = "day";
    const iso = `${viewY}-${String(viewM).padStart(2,"0")}-${String(d).padStart(2,"0")}`;

    cell.innerHTML = `<div class="dnum">${d}</div>`;

    // æ—¢ã«å‰²å½“ãŒã‚ã‚Œã°è¡¨ç¤º
    const actId = map[iso];
    if(actId && activityById[actId]){
      const a = activityById[actId];
      const tag = document.createElement("div");
      tag.className = `tag ${a.tag}`;
      tag.innerHTML = `<span class="emo">${a.emoji}</span><span class="txt">${a.label}</span>`;
      cell.appendChild(tag);
    }

    // ã‚¯ãƒªãƒƒã‚¯ã§åæ˜ ï¼ˆã“ã“ãŒå¾©æ´»éƒ¨åˆ†ï¼‰
    cell.addEventListener("click", ()=>{
      if(!current){
        alert("å…ˆã«æ´»å‹•ã‚’é¸ã‚“ã§ãã ã•ã„");
        return;
      }
      map[iso] = current;
      saveMonth(viewY, viewM, map);
      lastPicked = `${viewM}/${d}`;
      renderCalendar(); // å†æç”»ã§åæ˜ 
      updateStatus();
    });

    daysEl.appendChild(cell);
  }
}

/* ===== çŠ¶æ…‹è¡¨ç¤º ===== */
function updateStatus(){
  const pill = document.getElementById("currentPill");
  if(!current){
    pill.textContent = "ãªã—";
  }else{
    const a = activityById[current];
    pill.textContent = `${a.emoji} ${a.label}`;
  }
  document.getElementById("lastDate").textContent = lastPicked;
}

/* ===== ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ ===== */
function loadMonth(y,m){
  try{
    const raw = localStorage.getItem(keyOf(y,m));
    return raw ? JSON.parse(raw) : {};
  }catch(e){
    return {};
  }
}
function saveMonth(y,m,map){
  localStorage.setItem(keyOf(y,m), JSON.stringify(map));
}

/* å…¨æ¶ˆå» */
function clearMonth(){
  if(!confirm("ã“ã®æœˆã®å…¥åŠ›ã‚’å…¨ã¦æ¶ˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ")) return;
  localStorage.removeItem(keyOf(viewY, viewM));
  renderCalendar();
}

/* ä¿å­˜ â†’ saved.htmlã¸ï¼ˆæ—¢å­˜ãƒ•ãƒ­ãƒ¼ã«åˆã‚ã›ã‚‹ï¼‰ */
function goSaved(){
  // â€»ã“ã“ã¯ã‚ãªãŸã®æ—¢å­˜ saved.html ã¸é·ç§»ã™ã‚‹ä»•æ§˜ã«åˆã‚ã›ã¦ã‚ã‚‹
  location.href = `saved.html?y=${viewY}&m=${viewM}`;
}

/* æœˆç§»å‹• */
function shiftMonth(delta){
  const d = new Date(viewY, viewM-1 + delta, 1);
  viewY = d.getFullYear();
  viewM = d.getMonth()+1;
  renderCalendar();
}

/* ===== åˆæœŸåŒ– ===== */
buildMonthSelect();
renderActivities();
renderCalendar();
updateStatus();

document.getElementById("clearBtn").addEventListener("click", clearMonth);
document.getElementById("saveBtn").addEventListener("click", goSaved);
document.getElementById("prevBtn").addEventListener("click", ()=>shiftMonth(-1));
document.getElementById("nextBtn").addEventListener("click", ()=>shiftMonth(1));
</script>

</body>
</html>
